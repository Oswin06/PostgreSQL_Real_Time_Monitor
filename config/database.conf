# PostgreSQL Monitor - Database Connection Configuration
# This file contains the database connection settings for the monitoring system.

# Connection Configuration Format:
# [Connection]
# host=database hostname or IP address
# port=database port (usually 5432)
# database=database name
# username=database username
# password=database password
# connect_timeout=connection timeout in seconds
# sslmode=SSL connection mode (optional)
# application_name=application name shown in pg_stat_activity (optional)

[Connection]
host=localhost
port=5432
database=postgres
username=postgres
password=password
connect_timeout=10
sslmode=prefer
application_name=PostgreSQL-Monitor

# Alternative Connection Example for Remote Database:
#
# [Connection]
# host=your-db-server.example.com
# port=5432
# database=your_production_db
# username=monitor_user
# password=your_secure_password
# connect_timeout=15
# sslmode=require
# application_name=Production-DB-Monitor

# ===== SECURITY NOTES =====
#
# 1. Store this file in a secure location with appropriate file permissions.
#    Recommended: chmod 600 database.conf (read/write by owner only)
#
# 2. Use a dedicated monitoring user with limited privileges:
#    - Only SELECT permissions on tables you need to monitor
#    - SELECT permissions on system catalogs for performance monitoring
#    - Do not use superuser accounts for monitoring
#
# 3. Consider using PostgreSQL connection pooling for production:
#    - PgBouncer or similar connection poolers
#    - Set host to pooler address and port to pooler port
#
# 4. Use SSL connections for remote databases:
#    - Set sslmode=require or sslmode=verify-full
#    - Configure SSL certificates as needed
#
# ===== PRIVILEGES FOR MONITORING USER =====
#
# Create a monitoring user with these minimal privileges:
#
# -- Create the user
# CREATE USER monitor_user WITH PASSWORD 'your_secure_password';
#
# -- Grant connection privileges
# GRANT CONNECT ON DATABASE your_database TO monitor_user;
#
# -- Grant usage on schema
# GRANT USAGE ON SCHEMA public TO monitor_user;
#
# -- Grant select on specific tables (monitoring user only needs SELECT)
# GRANT SELECT ON your_table TO monitor_user;
#
# -- Grant select on system catalogs for performance monitoring
# GRANT SELECT ON pg_stat_activity TO monitor_user;
# GRANT SELECT ON pg_stat_database TO monitor_user;
# GRANT SELECT ON pg_locks TO monitor_user;
#
# ===== CONNECTION POOLING EXAMPLE =====
#
# If using PgBouncer, your connection section might look like:
#
# [Connection]
# host=localhost
# port=6432
# database=your_database
# username=monitor_user
# password=your_secure_password
# connect_timeout=10
#
# ===== SSL CONFIGURATION EXAMPLE =====
#
# For secure connections to remote databases:
#
# [Connection]
# host=secure-db.example.com
# port=5432
# database=production_db
# username=monitor_user
# password=secure_password
# connect_timeout=15
# sslmode=verify-full
# sslrootcert=/path/to/ca-certificates.crt
# sslcert=/path/to/client-cert.pem
# sslkey=/path/to/client-key.pem
#
# ===== MULTIPLE DATABASE SUPPORT =====
#
# If you need to monitor multiple databases, create multiple connection sections:
#
# [Connection_Primary]
# host=db-primary.example.com
# port=5432
# database=primary_db
# username=monitor_user
# password=primary_password
#
# [Connection_Replica]
# host=db-replica.example.com
# port=5432
# database=replica_db
# username=monitor_user
# password=replica_password
#
# Then modify the application to load the appropriate connection section.
#
# ===== CONNECTION TROUBLESHOOTING =====
#
# Common connection issues and solutions:
#
# 1. "Connection refused": Check if PostgreSQL is running and accepting connections
#    - Verify port number is correct
#    - Check postgresql.conf for listen_addresses setting
#    - Check pg_hba.conf for allowed connections
#
# 2. "Authentication failed": Verify username and password are correct
#    - Check if user exists: \du in psql
#    - Verify password or password authentication method
#
# 3. "Timeout": Increase connect_timeout value or check network connectivity
#    - Verify firewall settings
#    - Check network latency between application and database
#
# 4. "SSL error": Configure SSL settings properly
#    - Verify SSL certificates are valid and accessible
#    - Check if server supports SSL connections
#
# ===== ENVIRONMENT VARIABLE SUPPORT =====
#
# You can also use environment variables to override these settings:
#
# export PGHOST=localhost
# export PGPORT=5432
# export PGDATABASE=postgres
# export PGUSER=postgres
# export PGPASSWORD=password
#
# Environment variables take precedence over this configuration file.